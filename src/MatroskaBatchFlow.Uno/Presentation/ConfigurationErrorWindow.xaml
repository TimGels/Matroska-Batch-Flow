<Window
    x:Class="MatroskaBatchFlow.Uno.Presentation.ConfigurationErrorWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid Padding="48">
        <StackPanel
            MaxWidth="700"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Spacing="24">

            <!-- Header with Icon and Title -->
            <StackPanel
                HorizontalAlignment="Center"
                Orientation="Horizontal"
                Spacing="16">
                <FontIcon
                    FontSize="32"
                    Foreground="IndianRed"
                    Glyph="&#xE783;" />
                <TextBlock
                    FontSize="28"
                    FontWeight="SemiBold"
                    Text="Startup Error" />
            </StackPanel>

            <!-- Error Message -->
            <TextBlock
                FontSize="14"
                LineHeight="22"
                Text="{x:Bind ViewModel.ErrorMessage, Mode=OneWay}"
                TextWrapping="Wrap" />

            <!-- Details Expander (only visible when there are details) -->
            <Expander
                HorizontalAlignment="Stretch"
                HorizontalContentAlignment="Stretch"
                Header="View Details"
                Visibility="{x:Bind ViewModel.HasDetails, Mode=OneWay}">
                <ScrollViewer
                    MaxHeight="300"
                    HorizontalScrollBarVisibility="Auto"
                    VerticalScrollBarVisibility="Auto">
                    <TextBlock
                        FontFamily="Consolas"
                        FontSize="12"
                        IsTextSelectionEnabled="True"
                        Text="{x:Bind ViewModel.ErrorDetails, Mode=OneWay}"
                        TextWrapping="NoWrap" />
                </ScrollViewer>
            </Expander>

            <!-- Instruction Text -->
            <TextBlock
                Margin="0,8,0,0"
                FontSize="13"
                FontStyle="Italic"
                Foreground="{ThemeResource SystemFillColorCriticalBrush}"
                Text="Please correct the issue and restart the application."
                TextWrapping="Wrap" />

            <!-- OK Button -->
            <Button
                MinWidth="120"
                Margin="0,16,0,0"
                HorizontalAlignment="Center"
                Command="{x:Bind ViewModel.CloseCommand}"
                Content="OK"
                Style="{StaticResource AccentButtonStyle}" />
        </StackPanel>
    </Grid>
</Window>
